<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Food Business Academy | Student Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
:root{
  --purple:#6d28d9;
  --blue:#2563eb;
  --bg:linear-gradient(180deg,#eef2ff,#f9fbff);
  --text:#1f2937;
  --soft:rgba(255,255,255,.9);
}
*{box-sizing:border-box;font-family:'Poppins',sans-serif}
body{margin:0;background:var(--bg);color:var(--text)}

.layout{display:grid;grid-template-columns:280px 1fr;min-height:100vh}

/* Sidebar */
.sidebar{
background:linear-gradient(180deg,var(--blue),var(--purple));
color:#fff;padding:25px;height:100vh
}
.sidebar a{
display:flex;gap:12px;align-items:center;
color:#e5e7eb;text-decoration:none;
padding:12px;border-radius:12px;margin-bottom:8px
}
.sidebar a:hover{background:rgba(255,255,255,.2)}
.sidebar .logout{background:#ef4444;color:#fff}

/* Main */
.main{padding:28px}

/* Header */
.top-header{
display:flex;justify-content:space-between;align-items:center;
background:linear-gradient(135deg,var(--blue),var(--purple));
color:#fff;padding:18px 22px;border-radius:18px;margin-bottom:25px
}
.badge{background:rgba(255,255,255,.2);padding:6px 12px;border-radius:999px}

/* Card */
.card{
background:var(--soft);
border-radius:22px;
padding:25px;
box-shadow:0 20px 40px rgba(0,0,0,.08);
margin-bottom:22px
}

.hidden{display:none}
.fade-in{animation:fade .3s ease}
@keyframes fade{from{opacity:0}to{opacity:1}}

@media(max-width:900px){
.layout{grid-template-columns:1fr}
.sidebar{height:auto}
}
</style>
</head>

<body>
<div class="layout">

<!-- SIDEBAR -->
<aside class="sidebar">
  <h2>FBA Portal</h2>
  <a href="#" onclick="show('dashboard')"><i class="fa fa-home"></i> Home</a>
  <a href="#" onclick="show('progress')"><i class="fa fa-chart-line"></i> Progress Tracking</a>
  <a href="#" onclick="show('catalog')"><i class="fa fa-book"></i> Courses Offered</a>
  <a href="#" onclick="show('certs')"><i class="fa fa-certificate"></i> Certificates</a>
  <a href="#" onclick="show('tickets')"><i class="fa fa-ticket"></i> Tickets Support</a>
  <a href="#" onclick="show('profile')"><i class="fa fa-user"></i> Student Profile</a>
  <a href="#" class="logout" onclick="logout()"><i class="fa fa-sign-out-alt"></i> Logout</a>
</aside>

<!-- MAIN -->
<main class="main">

<!-- HEADER -->
<div class="top-header">
  <div>
    <h1>Welcome, <span id="studentName">Student</span> ðŸ‘‹</h1>
    <div class="badge">Student ID: <span id="studentId"></span></div>
  </div>
</div>

<!-- DASHBOARD (UNCHANGED) -->
<section id="dashboard" class="fade-in">
  <div class="card">
    <h3>Dashboard</h3>
    <p>Main dashboard content remains active.</p>
  </div>
</section>

<!-- PROGRESS (PRUNED) -->
<section id="progress" class="hidden fade-in">
  <div class="card">
    <h3>Progress Tracking</h3>
    <p>This page is reserved for future progress features.</p>
  </div>
</section>

<!-- COURSES (PRUNED) -->
<section id="catalog" class="hidden fade-in">
  <div class="card">
    <h3>Courses Offered</h3>
    <p>This page is reserved for future course listings.</p>
  </div>
</section>

<!-- CERTIFICATES (PRUNED) -->
<section id="certs" class="hidden fade-in">
  <div class="card">
    <h3>Certificates</h3>
    <p>This page is reserved for future certificates.</p>
  </div>
</section>

<!-- TICKETS (PRUNED) -->
<section id="tickets" class="hidden fade-in">
  <div class="card">
    <h3>Tickets Support</h3>
    <p>This page is reserved for future support features.</p>
  </div>
</section>

<!-- PROFILE (PRUNED) -->
<section id="profile" class="hidden fade-in">
  <div class="card">
    <h3>Student Profile</h3>
    <p>This page is reserved for future profile management.</p>
  </div>
</section>

</main>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyC_lKWa4cM4cT337KkRw4sp7raQHl9aZWk",
  authDomain:"students-login-29409.firebaseapp.com",
  projectId:"students-login-29409"
});

const auth = firebase.auth();
const db = firebase.firestore();

/* Navigation */
function show(id){
  ['dashboard','progress','catalog','certs','tickets','profile']
    .forEach(s=>document.getElementById(s).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* Logout */
function logout(){
  auth.signOut().then(()=>location.href='index.html');
}

/* Auth + student data */
auth.onAuthStateChanged(async user=>{
  if(!user){ location.href='index.html'; return; }

  studentId.textContent = user.uid.slice(0,8);

  const ref = db.collection('students').doc(user.uid);
  const snap = await ref.get();

  if(!snap.exists){
    await ref.set({ username:user.email.split('@')[0] });
    studentName.textContent = user.email.split('@')[0];
  }else{
    const data = snap.data();
    studentName.textContent = data.profile?.name || data.username;
  }
});
</script>

</body>
</html>
