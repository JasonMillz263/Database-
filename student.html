<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Food Business Academy | Student Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
:root{
  --purple:#6d28d9;
  --blue:#2563eb;
  --bg:linear-gradient(180deg,#eef2ff,#f9fbff);
  --text:#1f2937;
  --soft:rgba(255,255,255,.95);
}

*{box-sizing:border-box;font-family:'Poppins',sans-serif}
body{margin:0;background:var(--bg);color:var(--text);overflow-x:hidden}

/* Layout */
.layout{
  display:grid;
  grid-template-columns:280px 1fr;
  min-height:100vh;
}

/* Sidebar */
.sidebar{
  background:linear-gradient(180deg,var(--blue),var(--purple));
  color:#fff;
  padding:25px;
}
.sidebar h2{margin-bottom:20px}
.sidebar a{
  display:flex;gap:12px;align-items:center;
  color:#e5e7eb;text-decoration:none;
  padding:12px;border-radius:12px;margin-bottom:8px;
  transition:.25s;
}
.sidebar a:hover{
  background:rgba(255,255,255,.2);
  transform:translateX(6px);
}
.sidebar .logout{background:#ef4444;color:#fff}

/* Main */
.main{
  padding:28px;
  animation:pageIn .5s ease;
}
@keyframes pageIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

/* Header */
.top-header{
  display:flex;justify-content:space-between;align-items:center;
  background:linear-gradient(135deg,var(--blue),var(--purple));
  color:#fff;
  padding:20px 24px;
  border-radius:20px;
}
.badge{
  background:rgba(255,255,255,.2);
  padding:6px 14px;border-radius:999px;
  font-size:14px;
}

/* HERO SLIDER */
.hero{
  margin:28px 0;
  position:relative;
  height:260px;
  border-radius:26px;
  overflow:hidden;
}
.slide{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  opacity:0;
  transition:opacity 1s ease;
}
.slide.active{opacity:1}
.hero-overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(90deg,rgba(0,0,0,.6),transparent);
  display:flex;
  align-items:center;
  padding:40px;
  color:#fff;
}
.hero h2{font-size:32px;margin:0}
.hero p{max-width:480px;margin-top:10px}

/* Stats */
.glass{
  background:rgba(255,255,255,.7);
  backdrop-filter:blur(14px);
  border-radius:22px;
  box-shadow:0 25px 45px rgba(0,0,0,.12);
}

/* Stats */
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:18px;
  margin-bottom:26px;
}
.stat-card{
  padding:22px;
  color:#111;
  position:relative;
}
.stat-card i{
  font-size:28px;
  color:var(--purple);
}
.stat-value{
  font-size:32px;
  font-weight:700;
}
.stat-title{opacity:.7}

/* Progress */
.progress-box{margin-top:12px}
.progress-track{
  height:12px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  width:0;
  background:linear-gradient(90deg,var(--blue),var(--purple));
  border-radius:999px;
  transition:width 1.4s ease;
}

/* Buttons */
.link-btn{
  padding:14px 20px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,var(--blue),var(--purple));
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}
.link-btn:hover{
  transform:scale(1.04);
  box-shadow:0 18px 35px rgba(109,40,217,.4);
}
.link-btn i{margin-right:8px}

/* Page transition overlay */
#pageTransition{
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,var(--blue),var(--purple));
  z-index:999;
  opacity:0;
  pointer-events:none;
  transition:opacity .45s ease;
}
#pageTransition.active{
  opacity:1;
  pointer-events:auto;
}

@media(max-width:900px){
  .layout{grid-template-columns:1fr}
}
</style>
</head>

<body>

<div id="pageTransition"></div>

<div class="layout">

<!-- SIDEBAR -->
<aside class="sidebar">
  <h2>FBA Portal</h2>
  <a href="dashboard.html" class="nav-link"><i class="fa fa-home"></i> Home</a>
  <a href="progress.html" class="nav-link"><i class="fa fa-chart-line"></i> Progress Tracking</a>
  <a href="courses.html" class="nav-link"><i class="fa fa-book"></i> Courses Offered</a>
  <a href="certificates.html" class="nav-link"><i class="fa fa-certificate"></i> Certificates</a>
  <a href="tickets.html" class="nav-link"><i class="fa fa-ticket"></i> Tickets Support</a>
  <a href="profile.html" class="nav-link"><i class="fa fa-user"></i> Student Profile</a>
  <a href="#" class="logout" onclick="logout()"><i class="fa fa-sign-out-alt"></i> Logout</a>
</aside>

<!-- MAIN -->
<main class="main">

<!-- HEADER -->
<div class="top-header">
  <div>
    <h1>Welcome, <span id="studentName">Student</span> ðŸ‘‹</h1>
    <div class="badge">Student ID: <span id="studentId"></span></div>
  </div>
</div>

<!-- HERO SLIDER -->
<div class="hero">
  <div class="slide active" style="background-image:url('https://images.unsplash.com/photo-1556911220-e15b29be8c8f')"></div>
  <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1504674900247-0877df9cc836')"></div>
  <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1600891964599-f61ba0e24092')"></div>

  <div class="hero-overlay">
    <div>
      <h2>Build a Profitable Food Business</h2>
      <p>Learn recipes, branding, costing, marketing & real-world food entrepreneurship skills.</p>
    </div>
  </div>
</div>

<!-- STATS -->
<section class="stats">
  <div class="stat-card glass">
    <i class="fa fa-book"></i>
    <div class="stat-value">3</div>
    <div class="stat-title">Courses Enrolled</div>
  </div>

  <div class="stat-card glass">
    <i class="fa fa-chart-line"></i>
    <div class="stat-value">68%</div>
    <div class="stat-title">Completion Rate</div>
  </div>

  <div class="stat-card glass">
    <i class="fa fa-certificate"></i>
    <div class="stat-value">1</div>
    <div class="stat-title">Certificates</div>
  </div>
</section>

<!-- DASHBOARD -->
<section class="card glass">
  <h3>Your Course Progress</h3>

  <div class="progress-box">
    <p>Food Business Startup</p>
    <div class="progress-track">
      <div class="progress-fill" data-progress="80"></div>
    </div>
  </div>

  <div class="progress-box">
    <p>Food Costing & Pricing</p>
    <div class="progress-track">
      <div class="progress-fill" data-progress="65"></div>
    </div>
  </div>

  <div class="progress-box">
    <p>Food Branding & Marketing</p>
    <div class="progress-track">
      <div class="progress-fill" data-progress="40"></div>
    </div>
  </div>
</section>

</main>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyC_lKWa4cM4cT337KkRw4sp7raQHl9aZWk",
  authDomain:"students-login-29409.firebaseapp.com",
  projectId:"students-login-29409"
});

const auth = firebase.auth();
const db = firebase.firestore();

/* Logout */
function logout(){
  auth.signOut().then(()=>location.href='index.html');
}

/* Auth + student data */
auth.onAuthStateChanged(async user=>{
  if(!user){ location.href='index.html'; return; }

  studentId.textContent = user.uid.slice(0,8);

  const ref = db.collection('students').doc(user.uid);
  const snap = await ref.get();

  if(!snap.exists){
    await ref.set({ username:user.email.split('@')[0] });
    studentName.textContent = user.email.split('@')[0];
  }else{
    const data = snap.data();
    studentName.textContent = data.profile?.name || data.username;
  }
});

/* HERO SLIDER LOGIC */
let slides = document.querySelectorAll('.slide');
let i = 0;
setInterval(() => {
  slides[i].classList.remove('active');
  i = (i + 1) % slides.length;
  slides[i].classList.add('active');
}, 4500);

/* Animate Progress Bars */
document.querySelectorAll('.progress-fill').forEach(bar => {
  setTimeout(() => bar.style.width = bar.dataset.progress + '%', 500);
});

/* Speed-down Page Transition */
document.querySelectorAll('.nav-link').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    pageTransition.classList.add('active');
    setTimeout(() => window.location = link.href, 420);
  });
});
</script>

</body>
</html>
