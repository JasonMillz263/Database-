<!DOCTYPE html>  <html lang="en">    <head>    
<meta charset="UTF-8">    
<title>Food Business Academy | Login</title>    
<meta name="viewport" content="width=device-width, initial-scale=1.0">  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">  <style>    
* {    
  box-sizing: border-box;    
  font-family: 'Poppins', sans-serif;    
}    body {
margin: 0;
height: 100vh;
background: linear-gradient(135deg, #0074D9, #8A2BE2);
display: flex;
align-items: center;
justify-content: center;
}

.login-box {
background: #ffffff;
width: 100%;
max-width: 400px;
padding: 40px;
border-radius: 18px;
box-shadow: 0 20px 45px rgba(0,0,0,0.25);
animation: fadeIn 0.6s ease;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}

.academy-title {
text-align: center;
font-size: 20px;
font-weight: 600;
color: #8A2BE2;
margin-bottom: 8px;
}

.login-box h2 {
text-align: center;
margin-bottom: 10px;
color: #1f1f1f;
}

.login-box p {
text-align: center;
font-size: 13px;
color: #666;
margin-bottom: 25px;
}

.input-field {
margin-bottom: 18px;
position: relative;
}

.input-field input {
width: 100%;
padding: 14px 16px;
border-radius: 12px;
border: 1px solid #dcdcdc;
font-size: 14px;
}

.toggle-pass {
position: absolute;
right: 15px;
top: 50%;
transform: translateY(-50%);
cursor: pointer;
font-size: 12px;
color: #0074D9;
}

.remember {
display: flex;
align-items: center;
font-size: 13px;
margin-bottom: 18px;
}

.login-btn {
width: 100%;
padding: 15px;
border: none;
border-radius: 14px;
background: linear-gradient(135deg, #0074D9, #8A2BE2);
color: #fff;
font-size: 15px;
font-weight: 600;
cursor: pointer;
}

.spinner {
display: none;
margin: 15px auto 0;
width: 24px;
height: 24px;
border: 3px solid #ddd;
border-top: 3px solid #8A2BE2;
border-radius: 50%;
animation: spin 1s linear infinite;
}

@keyframes spin {
to { transform: rotate(360deg); }
}

.links {
margin-top: 18px;
text-align: center;
font-size: 13px;
}

#msg {
margin-top: 12px;
text-align: center;
font-size: 13px;
color: #8A2BE2;
}
</style>  </head>  <body>  <div class="login-box">

  <div class="academy-title">Food Business Academy</div>    
  <h2>Login</h2>    
  <p>Sign in to access your dashboard</p>    <div class="input-field">    
    <input type="email" id="email" placeholder="Email">    
  </div>    <div class="input-field">    
    <input type="password" id="password" placeholder="Password">    
    <span class="toggle-pass" onclick="togglePassword()">Show</span>    
  </div>    <div class="remember">    
    <input type="checkbox" id="rememberMe">    
    <label for="rememberMe">Remember me</label>    
  </div>  <button class="login-btn" onclick="login()">Login</button>    <div class="spinner" id="spinner"></div>    <div class="links">    
    <a href="#" onclick="resetPassword()">Forgot password?</a>    
  </div>    <p id="msg"></p>    
</div>  <!-- Firebase -->  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>  <script>    
const firebaseConfig = {    
  apiKey: "AIzaSyC_lKWa4cM4cT337KkRw4sp7raQHl9aZWk",    
  authDomain: "students-login-29409.firebaseapp.com",    
  projectId: "students-login-29409",    
};    firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

/* Remember email */
window.onload = () => {
const savedEmail = localStorage.getItem("rememberEmail");
if (savedEmail) {
email.value = savedEmail;
rememberMe.checked = true;
}
};

function togglePassword() {
password.type = password.type === "password" ? "text" : "password";
}

/* ðŸ” LOGIN + ADMIN CHECK */
async function login() {
const emailVal = email.value;
const passVal = password.value;
const remember = rememberMe.checked;

msg.innerText = "";
spinner.style.display = "block";

if (remember) localStorage.setItem("rememberEmail", emailVal);
else localStorage.removeItem("rememberEmail");

try {
const cred = await auth.signInWithEmailAndPassword(emailVal, passVal);
const user = cred.user;

// IMPORTANT: force refresh token    
await user.getIdToken(true);    

const tokenResult = await user.getIdTokenResult();    

console.log("CLAIMS:", tokenResult.claims); // ðŸ” DEBUG    

if (tokenResult.claims.admin === true) {    
  window.location.href = "admin_dashboard.html";    
} else {    
  window.location.href = "student.html";    
}

} catch (err) {
msg.innerText = err.message;
} finally {
spinner.style.display = "none";
}
}

/* PASSWORD RESET */
function resetPassword() {
if (!email.value) {
msg.innerText = "Enter your email first.";
return;
}

auth.sendPasswordResetEmail(email.value)
.then(() => msg.innerText = "Password reset email sent.")
.catch(err => msg.innerText = err.message);
}
</script>  </body>

</html>    
